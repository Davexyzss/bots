name: Discord Random Notify Every 5 Minutes

on:
  schedule:
    - cron: "*/5 * * * *"   # Cháº¡y má»—i 5 phÃºt
  workflow_dispatch:          # Cho phÃ©p cháº¡y thá»§ cÃ´ng

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send random Discord message
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        shell: bash
        run: |
          messages=(
            '{"content":"Hello! This is a random message ðŸŽ‰"}'
            '{"content":"Keep calm and code on! ðŸ’»"}'
            '{"content":"Push thÃ nh cÃ´ng rá»“i! ðŸš€"}'
            '{"content":"Bug? KhÃ´ng cÃ³ Ä‘Ã¢u! ðŸ˜Ž"}'
          )
          rand_index=$(( RANDOM % ${#messages[@]} ))
          message="${messages[$rand_index]}"

          echo "Sending message: $message"

          RESPONSE=$(echo "$message" | curl -s -w "%{http_code}" -o response.txt -H "Content-Type: application/json" -X POST -d @- "$DISCORD_WEBHOOK")

          echo "Discord response HTTP code: $RESPONSE"
          echo "Response body:"
          cat response.txt
