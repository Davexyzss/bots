name: Discord Random Notify Every 5 Minutes

on:
  schedule:
    - cron: "*/5 * * * *"   # Chạy mỗi 5 phút
  workflow_dispatch:          # Cho phép chạy thủ công

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send random Discord message
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        shell: bash
        run: |
          messages=(
            '{"content":"Hello! This is a random message 🎉"}'
            '{"content":"Keep calm and code on! 💻"}'
            '{"content":"Push thành công rồi! 🚀"}'
            '{"content":"Bug? Không có đâu! 😎"}'
            '{"content":"Code hôm nay, deploy ngày mai! 🚀"}'
            '{"content":"Debug như một nghệ sĩ 🎨"}'
            '{"content":"Commit là một nghệ thuật, coder là nghệ sĩ 🎭"}'
            '{"content":"Đừng sợ bug, sợ không có bug để fix 😅"}'
            '{"content":"Chạy mà không lỗi là giả lập rồi! 🤖"}'
            '{"content":"Mỗi dòng code là một lời tỏ tình với project 💘"}'
            '{"content":"Merge xong rồi, không quay đầu nữa! 🔥"}'
            '{"content":"Chạy CI xanh lè như lá mạ 🌿"}'
            '{"content":"Pull về xong bug nổ như pháo bông 🎆"}'
            '{"content":"Khi code, hãy để tâm hồn bay xa ☁️"}'
            '{"content":"Gõ từng dòng code như viết nên thơ 💬"}'
            '{"content":"Sống như một dev, chết trong deadline 😵"}'
            '{"content":"Không bug không phải là code của tôi 🧠"}'
            '{"content":"Khi bạn commit, Git cũng rơi nước mắt 😢"}'
            '{"content":"Nghỉ trưa? Không! Fix bug đã 🧰"}'
            '{"content":"Build thành công, lỗi xuất hiện! 🐛"}'
            '{"content":"Dev giỏi là dev biết rollback 🌀"}'
            '{"content":"Ctrl + S là bản năng sinh tồn 🧬"}'
            '{"content":"Tôi không ngủ, tôi đang compile 😴"}'
            '{"content":"Ngày đẹp trời để... fix bug 😄"}'
            '{"content":"Backend sống, frontend chết 💀"}'
            '{"content":"404: Motivation Not Found 😶"}'
            '{"content":"Lỗi không phải do tôi, do định mệnh! 🌌"}'
            '{"content":"Một ngày không code là một ngày vô nghĩa 🕳️"}'
            '{"content":"Code xong rồi... test chưa ai? 👀"}'
            '{"content":"Dev mà không bug là dev chưa chạy 😆"}'
            '{"content":"Deadline đến gần như cơn bão 🌪️"}'
            '{"content":"Em ơi code chạy chưa, anh deploy nhé? 😘"}'
            '{"content":"Fix xong bug này, lại có bug kia 😓"}'
            '{"content":"Hôm nay trời đẹp, code lên production! 🌤️"}'
            '{"content":"Auto chạy mà manual fix 😑"}'
            '{"content":"Dev cũng cần tình yêu, không chỉ deadline 💔"}'
            '{"content":"Tôi và bug như mèo với chuột 🐭🐱"}'
            '{"content":"Push nhầm lên main rồi... thôi kệ 😬"}'
            '{"content":"Test kỹ chưa? Thôi cứ chạy đi 😅"}'
            '{"content":"Đời dev không như là mơ 🥲"}'
            '{"content":"Code dạo này khó hiểu ghê 🤯"}'
            '{"content":"Sáng code, chiều fix, tối ăn mì 🍜"}'
            '{"content":"Còn deadline là còn sống 🧟"}'
            '{"content":"Bug cũ chưa fix, bug mới lại tới 🔄"}'
            '{"content":"Đừng fix bug lúc nửa đêm! 🌃"}'
            '{"content":"Deploy mà không backup là tự sát 💣"}'
            '{"content":"Đừng hỏi code chạy chưa, hãy cầu nguyện 🙏"}'
            '{"content":"Người ta crush nhau, tôi crush app 😅"}'
            '{"content":"Anh dev với em tester là định mệnh 😁"}'
            '{"content":"Repo sạch là repo chưa clone 😇"}'
            '{"content":"Git log là nhật ký tội ác 📜"}'
            '{"content":"Tôi commit, Git chịu 🪓"}'
            '{"content":"Người yêu có thể không có, bug thì luôn có 😩"}'
            '{"content":"Fix bug xong thấy mình thông minh hẳn 🧠✨"}'
            '{"content":"Chạy là chạy thôi, không hỏi nhiều 🏃"}'
            '{"content":"Code ngu mà tool mạnh thì vẫn sống được 🔧"}'
            '{"content":"Debugger là người bạn tâm giao 🤝"}'
            '{"content":"Nhìn log thôi cũng biết hôm nay không lành 📉"}'
            '{"content":"Chạy test tự tin, đọc log run rẩy 🥶"}'
            '{"content":"UI đẹp là UI chưa ai dùng 🎨"}'
            '{"content":"Mỗi lần chạy là một lần cầu nguyện 🙏"}'
            '{"content":"Không đọc tài liệu, chỉ hỏi Google 📚"}'
            '{"content":"Sống trên git, chết vì merge 🪦"}'
            '{"content":"Code chưa chạy, dev chưa ngủ 😪"}'
            '{"content":"Đẩy code lên rồi, chuyện gì tới sẽ tới 🤷"}'
            '{"content":"Sáng fix bug, chiều làm UI, tối... than thở 😩"}'
            '{"content":"Không phải tôi fix bug, bug tự sửa 😇"}'
            '{"content":"Vào project như vào mê cung 🧩"}'
            '{"content":"Dev giỏi là dev ít comment code 😏"}'
            '{"content":"Review code mà như phán xử 👨‍⚖️"}'
            '{"content":"Merge xong, CI đỏ như máu 🩸"}'
            '{"content":"Fix 1 bug, sinh 3 bug mới 😱"}'
            '{"content":"Ngày xưa học code vì đam mê, giờ vì tiền 💰"}'
            '{"content":"Tôi với deadline là một mối tình oan nghiệt 💔"}'
            '{"content":"Khi bug nói: Tôi sẽ quay lại 😈"}'
            '{"content":"Cần một lời động viên, không phải bug mới 😢"}'
            '{"content":"Không stress, không phải lập trình viên 😶‍🌫️"}'
            '{"content":"Ngày không lỗi, đêm không ngủ 🌛"}'
            '{"content":"App chạy ngon... trên máy tao 🤷‍♂️"}'
            '{"content":"Thử xóa dòng này xem... crash luôn 😐"}'
            '{"content":"Tôi không lười, tôi tối ưu hoá quy trình 😎"}'
            '{"content":"Dev sống vì bug, chết vì deadline ⚰️"}'
            '{"content":"Bug thì nhiều, thời gian thì ít ⏳"}'
            '{"content":"Không phải lỗi, chỉ là tính năng bất ngờ 😆"}'
            '{"content":"Chạy thử tí nhé, đừng kỳ vọng 🫣"}'
            '{"content":"Tôi đã thử... và thất bại 🤕"}'
            '{"content":"Sống như dev, làm việc như bot 🤖"}'
            '{"content":"Push nhầm branch là chuyện thường ngày 😭"}'
            '{"content":"Code xong mới nhớ chưa lưu 😵"}'
            '{"content":"Một mình tôi gánh deadline 💪"}'
            '{"content":"Mỗi dòng code là một bước gần hơn tới điên 🤪"}'
            '{"content":"Dev giỏi là dev biết giấu bug 🤫"}'
            '{"content":"Sống cùng bug, chết cùng feature 🤯"}'
            '{"content":"CI xanh là chuyện cổ tích 📗"}'
            '{"content":"App không crash là app chưa chạy đủ lâu 🧨"}'
            '{"content":"Deadline là kẻ thù truyền kiếp 😤"}'
          )
          rand_index=$(( RANDOM % ${#messages[@]} ))
          message="${messages[$rand_index]}"

          echo "Sending message: $message"

          RESPONSE=$(echo "$message" | curl -s -w "%{http_code}" -o response.txt -H "Content-Type: application/json" -X POST -d @- "$DISCORD_WEBHOOK")

          echo "Discord response HTTP code: $RESPONSE"
          echo "Response body:"
          cat response.txt

